(function(){this.Graph=function(){function a(a,b){var c,d,e,f,g,h;this.el=a,this.data=b.data,this.color=null!=(f=b.color)?f:this.DEFAULT_COLOR,e=null!=(g=b.width)?g:this.DEFAULT_WIDTH,c=null!=(h=b.height)?h:this.DEFAULT_HEIGHT,d={top:30,right:20,bottom:30,left:50},this.stage_w=e-d.left-d.right,this.stage_h=c-d.top-d.bottom,this.stage=d3.select(""+this.el).append("svg").attr({width:this.stage_w+d.left+d.right,height:this.stage_h+d.top+d.bottom}).append("g").attr("transform","translate("+[d.left,d.top]+")")}return a.prototype.DEFAULT_COLOR="blue",a.prototype.DEFAULT_WIDTH=1e3,a.prototype.DEFAULT_HEIGHT=270,a}()}).call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};this.Line=function(b){function d(b,c){switch(this.el=b,this._path_tween=a(this._path_tween,this),d.__super__.constructor.apply(this,arguments),c.type){case"date":this._parse(this.data)}this._set_scale(this.data,c.type),this.axis=new LineAxis(this.stage,this.stage_h,this.scale_x,this.scale_y,c.type),this.line=d3.svg.line().x(function(a){return this.scale_x(a.x)}).y(function(a){return this.scale_y(a.y)}),this.interpolate=d3.scale.quantile().domain([0,1]).range(d3.range(1,this.data.length+1))}return c(d,b),d.prototype._parse=function(a){var b;return b=d3.time.format("%Y/%m/%d").parse,a.forEach(function(a){return a.x=b(a.x)})},d.prototype._set_scale=function(a,b){return(!this.max_y||this.max_y<d3.max(a,function(a){return a.y}))&&(this.max_y=d3.max(a,function(a){return a.y})),this.scale_x=function(){switch(b){case"date":return d3.time.scale().range([0,this.stage_w]);default:return d3.scale.linear().range([0,this.stage_w])}}.call(this),this.scale_x.domain(d3.extent(a,function(a){return a.x})),this.scale_y=d3.scale.linear().range([this.stage_h,0]),this.scale_y.domain([0,this.max_y])},d.prototype._path_tween=function(){return function(a){return function(b){return a.line(a.data.slice(0,a.interpolate(b)))}}(this)},d.prototype.add_line=function(a,b){return this._parse(a),this._set_scale(a),this.render(a,b)},d.prototype.render=function(){return this.axis.render(),this.stage.append("path").attr({d:this.line(this.data),fill:"none",stroke:this.color,"stroke-width":2}).transition().duration(1e3).attrTween("d",this._path_tween)},d}(Graph)}.call(this),function(){this.LineAxis=function(){function a(a,b,c,d,e){this.stage=a,this.stage_h=b,this.axis_x=function(){switch(e){case"date":return d3.svg.axis().scale(c).orient("bottom").tickFormat(d3.time.format("%m/%d"));default:return d3.svg.axis().scale(c).orient("bottom")}}(),this.axis_y=d3.svg.axis().scale(d).orient("left")}return a.prototype._render_x=function(){return this.stage.append("g").attr({"class":"x axis",transform:"translate("+[0,this.stage_h]+")"}).call(this.axis_x)},a.prototype._render_y=function(){return this.stage.append("g").attr({"class":"y axis"}).call(this.axis_y)},a.prototype.render=function(){return this._render_x(),this._render_y()},a}()}.call(this);